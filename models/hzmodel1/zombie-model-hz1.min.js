zombieModel={paramSettingsHtmlFile:"models/hzmodel1/zombie-model-hz1.html",mathGuideHtmlFile:"models/hzmodel1/mathguide.html",setup:function(){zombieModel.params={biteRate:80,biteInfectsChance:90,zombieDeathRate:10,encounterRate:40,birthRate:5,spread:25};document.getElementById("biteInfects").innerHTML=this.params.biteInfectsChance;document.getElementById("biteKills").innerHTML=100-this.params.biteInfectsChance;$("#slider-bite-infects").slider({value:zombieModel.params.biteInfectsChance,min:0,max:100,step:1,slide:function(a,b){zombieModel.params.biteInfectsChance=b.value;document.getElementById("biteInfects").innerHTML=zombieModel.params.biteInfectsChance;document.getElementById("biteKills").innerHTML=100-zombieModel.params.biteInfectsChance}});document.getElementById("biteRate").innerHTML=this.params.biteRate;$("#slider-bite-rate").slider({value:zombieModel.params.biteRate,min:0,max:100,step:1,slide:function(a,b){zombieModel.params.biteRate=b.value;document.getElementById("biteRate").innerHTML=zombieModel.params.biteRate}});document.getElementById("zombieDeathRate").innerHTML=this.params.zombieDeathRate;$("#slider-zombie-death-rate").slider({value:zombieModel.params.zombieDeathRate,min:0,max:100,step:1,slide:function(a,b){zombieModel.params.zombieDeathRate=b.value;document.getElementById("zombieDeathRate").innerHTML=zombieModel.params.zombieDeathRate}});document.getElementById("encounterRate").innerHTML=this.params.encounterRate;$("#slider-encounter-rate").slider({value:zombieModel.params.encounterRate,min:0,max:100,step:1,slide:function(a,b){zombieModel.params.encounterRate=b.value;document.getElementById("encounterRate").innerHTML=zombieModel.params.encounterRate}});document.getElementById("birthRate").innerHTML=this.params.birthRate;$("#slider-birth-rate").slider({value:zombieModel.params.birthRate,min:0,max:100,step:1,slide:function(a,b){zombieModel.params.birthRate=b.value;document.getElementById("birthRate").innerHTML=zombieModel.params.birthRate}})},nextIteration:function(g,p){var d=this.params.biteRate/100;var f=this.params.biteInfectsChance/100;var o=this.params.zombieDeathRate/100;var i=this.params.encounterRate/100;var m=this.params.birthRate/100;var k=this.params.spread;var b=this.calc(g.humans,g.zombies,d,f,o,i,m);var c=b.newHumanPop;var l=b.newZombiePop;var h=c+l;for(var n in p){var a=p[n].zombies;if(a==0){continue}if(a>k&&c>k){c-=k;l+=k}else{var j=((a<c)?a:c);c-=j;l+=j}}var e=zombies.zombiePercentage(l,c);return{zombies:Number(l),humans:Number(c),percentage:Number(e)}},calc:function(c,j,b,e,o,h,n){if(c==0){return{newHumanPop:0,newZombiePop:j}}var f=c+j;var l=n*c;if(j==0){return{newHumanPop:Math.floor(l+c),newZombiePop:0}}var a=h*c*j/f;var p=b*a;var i=e*p;var k=o*a;var m=c+l-p;var d=j+i-k;var g={newHumanPop:Number(Math.floor(m)),newZombiePop:Number(Math.floor(d))};return g}};